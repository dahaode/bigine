Bigine TypeScript 编码规范
===

1 模块
---

```
+-----+
| Lex |
+-----+---------+
| Tag | Runtime |
+-----+---------+
|     Core      |
+---------------+
|     Util      |
+---------------+
```

### 1.1 Util

*工具功能包。* 封装必需地常用功能。

### 1.2 Core

*核心结构包。* 规约中文剧本代码和标签、作品之间的关系。

### 1.3 Tag

*标签定义包。* 定义所有可能出现在中文剧本代码中地标签。

### 1.4 Runtime

*运行时功能包。* 实现作品播放。

### 1.5 Lex

*词法功能包。* 实现中文剧本代码的解析。

2 命名规范
---

### 2.1 基础

**模块**、**类**、**接口** 的基础命名规则采用 *首字母大写* 地驼峰拼写法。

**函数**、**方法**、**变量** 的基础命名规则采用 *首字母小写* 地驼峰拼写法。

### 2.2 接口

强制前置一个大写的 `I` 字母作为识别标志。

### 2.3 函数（方法）

如果该 **函数** …

1. 会暴露到 Bigine 之外，采用完整语意性命名，如：`addEventListener()`；
2. 会被其它无关类调用，采用语义单词的首字母命名，如：`p()` 之于 `perform`；
3. 是读写器，在上一规则基础上前置 `g` 或 `s` 表明作用，如：`gN()` 应解读为 `getName()`；
4. 只会被本身或子类调用，在第 2 条规则基础上前置 `$` 表明其作用域为受保护，如：`protected get content` 可拼写为 `$c()`。

### 2.4 属性

强制前置下划线符号 `_` 。

**为兼容 ES3 ，类外部不应直接操作类的属性。**

### 2.5 类型变量

使用单个大写字母标记，优先使用 `<T>` 。在需要地情况下，顺延使用后继字母，如：`<U>`、`<V>` 等。

3 文件系统
---

### 3.1 目录

一般情况下与 **模块** 一一对应，并在命名上完全一致。

但如果某 **目录** 中 **文件** 数量过多，应使用具备语义地 *伪模块型目录* 分隔。

*伪模块型目录* 前置下划线符号 `_` 标记。

### 3.2 文件

一般情况下与 **类** 或 **接口** 一一对应，并在命名上完全一致。

但如果某 **文件** 并非用于声明 **接口** 或定义 **类** ，命名时首字母转为小写，然后再前置下划线符号 `_` 标记。

4 代码规则
---

### 4.1 省略单条语句块的花括号

如果块结构中只有一条语句，那么省略掉该块结构的花括号，但 *语句应单起一行* 。如：

```
if (condition)
    // statement;
```

唯一例外在于如果是在 `if` 块结构中返回空值，则在一行内写完。如：

```
if (condition) return;
```
