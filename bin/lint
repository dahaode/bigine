#!/usr/bin/env node

if (!process.argv[2]) {
    process.exit(1);
}

require('fs').readFile(process.argv[2], {encoding: 'utf8'}, function (err, data) {
    try {
        if (err) {
            throw err;
        }
        var bigine = require('../lib/bigine')
            .$import('.core.episode')
            .$import('.util.parser');
        (new bigine.core.episode(bigine.util.parser.parse(data).tags)).$ready().then(function () {
            process.stdout.write("OK\n");
        }).fail(function (error) {
            process.stderr.write('错误：' + error.message + "\n");
            process.exit(2);
        });
    } catch (error) {
        process.stderr.write('错误：' + error.message + "\n");
        process.exit(3);
    }
});
